# 项目交接文档 - 学术文献管理系统

## 📦 已完成的工作

你好！所有头文件和框架代码已经为你准备好了。这份文档将帮助你快速理解项目结构和下一步工作。

## ✅ 已完成内容（同学A的工作）

### 1. 完整的项目结构
```
paper-system/
├── include/          # 7个头文件，全部完成 ✓
├── src/              # 8个cpp文件（5个框架，你需要实现）
├── data/             # papers.txt数据文件 ✓
├── Makefile          # 编译配置 ✓
└── README.md         # 完整文档 ✓
```

### 2. 核心数据类（你需要实现）

#### Paper.h / Paper.cpp
- **状态**: 头文件完成，cpp需要实现
- **职责**: 论文数据结构
- **重要方法**:
  - 构造函数
  - Getter/Setter
  - print() / printBrief()
  - countSharedKeywords()

#### FileManager.h / FileManager.cpp
- **状态**: 头文件完成，cpp需要实现
- **职责**: 文件读写
- **重要方法**:
  - loadPapers() - 从文件加载
  - savePapers() - 保存到文件
  - parseLine() - 解析一行数据

#### main.cpp
- **状态**: 已提供基础框架
- **你需要做**: 实现功能1-5（加载、显示、添加、删除、保存）

### 3. 给同学B和C的接口（框架已完成）

所有.h文件都已完成，包含详细的注释和实现建议。
对应的.cpp文件提供了函数框架，B和C同学可以直接填充。

## 📋 你的工作清单

### 第一步：实现Paper类 (2-3小时)

```cpp
// src/Paper.cpp

// 1. 实现构造函数
Paper::Paper() {
    paperId = 0;
    year = 0;
    citations = 0;
}

Paper::Paper(int id, const string& title, ...) {
    // 赋值所有成员变量
}

// 2. 实现Getter方法（很简单）
int Paper::getPaperId() const {
    return paperId;
}
// ... 其他getter

// 3. 实现Setter方法
void Paper::setPaperId(int id) {
    paperId = id;
}
// ... 其他setter

// 4. 实现功能方法
void Paper::print() const {
    cout << "ID: " << paperId << endl;
    cout << "Title: " << title << endl;
    // ... 显示其他信息
}

void Paper::printBrief() const {
    cout << "[" << paperId << "] " << title 
         << " (" << year << ") - Citations: " << citations;
}

int Paper::countSharedKeywords(const Paper& other) const {
    int count = 0;
    for (const auto& kw1 : keywords) {
        for (const auto& kw2 : other.keywords) {
            if (kw1 == kw2 && !kw1.empty()) {
                count++;
                break;
            }
        }
    }
    return count;
}
```

### 第二步：实现FileManager类 (2-3小时)

```cpp
// src/FileManager.cpp

vector<Paper> FileManager::loadPapers(const string& filename) {
    vector<Paper> papers;
    ifstream file(filename);
    
    if (!file.is_open()) {
        cerr << "错误：无法打开文件 " << filename << endl;
        return papers;
    }
    
    string line;
    getline(file, line);  // 跳过表头
    
    while (getline(file, line)) {
        try {
            Paper paper = parseLine(line);
            papers.push_back(paper);
        } catch (exception& e) {
            cerr << "解析错误: " << e.what() << endl;
        }
    }
    
    file.close();
    return papers;
}

Paper FileManager::parseLine(const string& line) {
    // 使用split函数按'|'分割
    vector<string> fields = split(line, '|');
    
    // 解析各个字段
    int id = stoi(fields[0]);
    string title = fields[1];
    
    // 解析作者（用;分割）
    vector<string> authors = split(fields[2], ';');
    
    // 解析关键词（fields[3]到fields[8]）
    vector<string> keywords;
    for (int i = 3; i <= 8; i++) {
        if (!fields[i].empty()) {
            keywords.push_back(fields[i]);
        }
    }
    
    int year = stoi(fields[9]);
    int citations = stoi(fields[10]);
    string abstract = fields[11];
    
    return Paper(id, title, authors, year, citations, keywords, abstract);
}

vector<string> FileManager::split(const string& str, char delimiter) {
    vector<string> tokens;
    string token;
    istringstream tokenStream(str);
    
    while (getline(tokenStream, token, delimiter)) {
        tokens.push_back(token);
    }
    
    return tokens;
}
```

### 第三步：实现main.cpp的功能 (3-4小时)

```cpp
// main.cpp中需要实现的功能

case 1: { // 加载数据
    papers = FileManager::loadPapers("data/papers.txt");
    if (!papers.empty()) {
        dataLoaded = true;
        cout << "成功加载 " << papers.size() << " 篇论文" << endl;
    }
    break;
}

case 2: { // 显示所有论文
    if (dataLoaded) {
        for (auto& paper : papers) {
            paper.printBrief();
            cout << endl;
        }
    }
    break;
}

case 3: { // 添加新论文
    if (dataLoaded) {
        // 获取用户输入
        int id, year, citations;
        string title, authorsStr, abstract;
        vector<string> authors, keywords;
        
        cout << "输入论文ID: ";
        cin >> id;
        cin.ignore();
        
        cout << "输入标题: ";
        getline(cin, title);
        
        // ... 获取其他信息
        
        Paper newPaper(id, title, authors, year, citations, keywords, abstract);
        papers.push_back(newPaper);
        cout << "论文添加成功！" << endl;
    }
    break;
}

case 4: { // 删除论文
    if (dataLoaded) {
        int id;
        cout << "输入要删除的论文ID: ";
        cin >> id;
        
        auto it = papers.begin();
        while (it != papers.end()) {
            if (it->getPaperId() == id) {
                papers.erase(it);
                cout << "论文已删除" << endl;
                break;
            }
            ++it;
        }
    }
    break;
}

case 5: { // 保存数据
    if (dataLoaded) {
        if (FileManager::savePapers(papers, "data/papers.txt")) {
            cout << "数据保存成功！" << endl;
        }
    }
    break;
}
```

## 🔧 编译和测试

### 编译步骤
```bash
# 进入项目目录
cd paper-system

# 编译（会提示一些未实现的函数，这是正常的）
make

# 如果编译失败，逐个编译调试
g++ -c -std=c++11 -I./include src/Paper.cpp -o obj/Paper.o
g++ -c -std=c++11 -I./include src/FileManager.cpp -o obj/FileManager.o
```

### 测试步骤
```bash
# 运行程序
./paper_system

# 测试功能1：加载数据
选择 1 → 应该显示"成功加载50篇论文"

# 测试功能2：显示论文
选择 2 → 应该显示所有论文的简要信息

# 测试功能3：添加论文
选择 3 → 输入新论文信息

# 测试功能4：删除论文
选择 4 → 输入要删除的ID

# 测试功能5：保存数据
选择 5 → 数据应该被保存到文件
```

## 📝 注意事项

### 1. 字符串处理
- 使用 `getline(cin, str)` 读取带空格的字符串
- 使用 `stoi()` 将string转换为int
- 注意处理空字符串

### 2. 文件格式
```
ID|Title|Authors;Separated|Kw1|Kw2|Kw3|Kw4|Kw5|Kw6|Year|Citations|Abstract
```
- 字段用 `|` 分隔
- 作者用 `;` 分隔
- 关键词最多6个，不足留空

### 3. 错误处理
- 文件打开失败
- 数据解析错误
- 输入格式错误

### 4. 内存管理
- Paper对象在vector中管理，自动释放
- 不要手动delete Paper对象

## 🎯 给同学B和C的说明

### 同学B需要实现（10-15小时）:
1. `HashSearch.cpp` - 哈希表查找
2. `BSTSearch.cpp` - 二叉搜索树查找
3. `Sorter.cpp` - 三种排序算法

### 同学C需要实现（10-15小时）:
1. `GraphAnalyzer.cpp` - 图构建和BFS
2. `Recommender.cpp` - 关键词统计和Top-N

**重要**: 你需要先完成Paper和FileManager，他们才能开始工作！

## 📚 参考资料

### 头文件注释
每个头文件都包含：
- 功能说明
- 数据结构建议
- 算法步骤
- 实现提示
- 时间复杂度

### README.md
包含：
- 完整的功能列表
- 接口说明
- 编译方法
- 测试建议

## ⏰ 时间估算

| 任务 | 预计时间 | 优先级 |
|------|---------|--------|
| Paper类 | 2-3小时 | 🔴 最高 |
| FileManager类 | 2-3小时 | 🔴 最高 |
| main.cpp功能1-5 | 3-4小时 | 🔴 最高 |
| 测试和调试 | 2小时 | 🟡 中 |
| 文档完善 | 1小时 | 🟢 低 |
| **总计** | **10-13小时** | |

## 🚀 开始开发

### 推荐开发顺序:
1. ✅ 阅读所有头文件注释（30分钟）
2. ✅ 实现Paper类（2-3小时）
3. ✅ 实现FileManager的loadPapers（2小时）
4. ✅ 实现main.cpp功能1和2（测试加载和显示）（1小时）
5. ✅ 实现FileManager的savePapers（1小时）
6. ✅ 实现main.cpp功能3-5（2小时）
7. ✅ 全面测试（2小时）
8. ✅ 交接给B和C（告诉他们接口已准备好）

## 💡 实用技巧

### 调试技巧
```cpp
// 1. 打印调试信息
cout << "[DEBUG] Loading papers..." << endl;

// 2. 检查数据
cout << "Parsed: ID=" << id << ", Title=" << title << endl;

// 3. 捕获异常
try {
    // 代码
} catch (exception& e) {
    cerr << "Error: " << e.what() << endl;
}
```

### VS Code配置
```json
// tasks.json
{
    "command": "make",
    "type": "shell"
}

// launch.json
{
    "program": "${workspaceFolder}/paper_system",
    "cwd": "${workspaceFolder}"
}
```

## 📞 如果遇到问题

1. **编译错误**: 
   - 检查include路径
   - 检查函数声明和定义是否匹配

2. **链接错误**:
   - 检查是否所有cpp文件都被编译
   - 检查Makefile的SOURCES列表

3. **运行时错误**:
   - 使用gdb调试: `gdb ./paper_system`
   - 添加cout调试信息

4. **文件读取失败**:
   - 检查文件路径是否正确
   - 检查文件权限

## ✅ 验收标准

完成后应该能够：
- ✅ 成功编译（无警告）
- ✅ 加载papers.txt（功能1）
- ✅ 显示所有论文（功能2）
- ✅ 添加新论文（功能3）
- ✅ 删除论文（功能4）
- ✅ 保存到文件（功能5）
- ✅ 数据正确性（再次加载能看到修改）

## 🎉 完成后

恭喜！当你完成这些工作后：

1. 通知同学B和C可以开始了
2. 给他们看README.md和头文件注释
3. 解释接口的使用方法
4. 准备好回答他们的问题

---

**祝你开发顺利！如有问题随时查看头文件中的详细注释。** 🚀

**记住**：代码质量比速度更重要，写清晰的代码，添加必要的注释！
